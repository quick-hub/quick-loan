<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Dashboard - Quick Loan">
    <title>Admin Dashboard - Quick Loan</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body class="admin-body">
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="admin-header-content">
            <div class="admin-brand">
                <h1>üè¶ Quick Loan Admin</h1>
            </div>
            <div class="admin-user">
                <span class="admin-username" id="adminUser">Administrator</span>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Admin Sidebar -->
    <aside class="admin-sidebar">
        <nav class="admin-nav">
            <a href="#" class="nav-link active" data-section="dashboard">
                <span class="nav-icon">üìä</span>
                Dashboard
            </a>
            <a href="#" class="nav-link" data-section="fee-settings">
                <span class="nav-icon">üí∞</span>
                Fee Settings
            </a>
            <a href="#" class="nav-link" data-section="payment-accounts">
                <span class="nav-icon">üèß</span>
                Payment Accounts
            </a>
            <a href="#" class="nav-link" data-section="applications">
                <span class="nav-icon">üìÑ</span>
                Applications
            </a>
            <a href="#" class="nav-link" data-section="settings">
                <span class="nav-icon">‚öôÔ∏è</span>
                Settings
            </a>
        </nav>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
        
        <!-- Dashboard Section -->
        <section id="dashboard" class="admin-section active">
            <h2 class="section-title">Dashboard Overview</h2>
            
            <!-- Critical Alert for Missing Payment Accounts -->
            <div class="alert alert-error" id="dashboardNoAccountsAlert">
                <span class="alert-icon">üö®</span>
                <div class="alert-message">
                    <strong>CRITICAL: Payment System Not Ready!</strong>
                    <p>No payment accounts are configured. Clients cannot complete payments and will see an error message. Please add at least one payment account immediately.</p>
                    <button onclick="switchSection('payment-accounts')">
                        Go to Payment Accounts ‚Üí
                    </button>
                </div>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìã</div>
                    <div class="stat-content">
                        <h3>Total Applications</h3>
                        <p class="stat-number" id="totalApplications">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üíµ</div>
                    <div class="stat-content">
                        <h3>Processing Fee</h3>
                        <p class="stat-number" id="currentFee">$149.00</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <h3>Active Accounts</h3>
                        <p class="stat-number" id="activeAccounts">0</p>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üåê</div>
                    <div class="stat-content">
                        <h3>Website Status</h3>
                        <p class="stat-number stat-success">Active</p>
                    </div>
                </div>
            </div>

            <div class="quick-actions">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <button class="btn-action" onclick="switchSection('fee-settings')">
                        <span class="action-icon">üí∞</span>
                        Update Processing Fee
                    </button>
                    <button class="btn-action" onclick="switchSection('payment-accounts')">
                        <span class="action-icon">üèß</span>
                        Manage Payment Accounts
                    </button>
                    <button class="btn-action" onclick="switchSection('applications')">
                        <span class="action-icon">üìÑ</span>
                        View Applications
                    </button>
                </div>
            </div>
        </section>

        <!-- Fee Settings Section -->
        <section id="fee-settings" class="admin-section">
            <h2 class="section-title">Processing Fee Settings</h2>
            
            <div class="content-card">
                <h3>Configure Processing Fee</h3>
                <p class="card-description">Set the processing fee that clients must pay when submitting loan applications.</p>
                
                <form id="feeSettingsForm" class="admin-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="processingFee">Processing Fee Amount ($)</label>
                            <input type="number" id="processingFee" min="0" step="0.01" value="149.00" required>
                        </div>
                        <div class="form-group">
                            <label for="adminFee">Administrative Fee ($)</label>
                            <input type="number" id="adminFee" min="0" step="0.01" value="50.00" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="feeDescription">Fee Description</label>
                        <textarea id="feeDescription" rows="3" placeholder="Enter fee description for clients">One-time, non-refundable processing fee for loan application review, credit checks, and administrative expenses.</textarea>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="feeEnabled" checked>
                        <label for="feeEnabled">Enable Processing Fee</label>
                    </div>

                    <div class="alert alert-info">
                        <span class="alert-icon">‚ÑπÔ∏è</span>
                        <span class="alert-message">Total Fee: <strong id="totalFeeDisplay">$199.00</strong></span>
                    </div>

                    <button type="submit" class="btn-admin-primary">
                        <span class="btn-icon">üíæ</span>
                        Save Fee Settings
                    </button>
                </form>
            </div>
        </section>

        <!-- Payment Accounts Section -->
        <section id="payment-accounts" class="admin-section">
            <h2 class="section-title">Payment Account Management</h2>
            
            <!-- Warning Alert -->
            <div class="alert alert-error" id="noAccountsWarning">
                <span class="alert-icon">‚ö†Ô∏è</span>
                <div class="alert-message">
                    <strong>Action Required:</strong> No payment accounts configured! Clients cannot complete payments until you add at least one active payment account below.
                </div>
            </div>
            
            <div class="content-card">
                <div class="card-header">
                    <h3>Manage Payment Accounts</h3>
                    <button class="btn-success" onclick="showAddAccountModal()">
                        <span class="btn-icon">‚ûï</span>
                        Add New Account
                    </button>
                </div>
                
                <p class="card-description">Configure bank accounts and payment methods that will be displayed to clients for processing fee payments.</p>

                <!-- Accounts Table -->
                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Account Name</th>
                                <th>Account Type</th>
                                <th>Account Number</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="accountsTableBody">
                            <tr>
                                <td colspan="5" class="text-center">No payment accounts configured. Click "Add New Account" to get started.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Applications Section -->
        <section id="applications" class="admin-section">
            <h2 class="section-title">Loan Applications</h2>
            
            <div class="content-card">
                <h3>Recent Applications</h3>
                <p class="card-description">View and manage loan applications submitted by clients.</p>

                <div class="table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Application ID</th>
                                <th>Applicant Name</th>
                                <th>Loan Type</th>
                                <th>Amount</th>
                                <th>Date</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="applicationsTableBody">
                            <tr>
                                <td colspan="6" class="text-center">No applications yet.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <!-- Settings Section -->
        <section id="settings" class="admin-section">
            <h2 class="section-title">System Settings</h2>
            
            <div class="content-card">
                <h3>General Settings</h3>
                
                <form id="settingsForm" class="admin-form">
                    <div class="form-group">
                        <label for="companyEmail">Company Email</label>
                        <input type="email" id="companyEmail" value="support@quickloan.com">
                    </div>

                    <div class="form-group">
                        <label for="companyPhone">Company Phone</label>
                        <input type="tel" id="companyPhone" value="1-800-555-1234">
                    </div>

                    <div class="form-group">
                        <label for="formSubmitEmail">FormSubmit.co Email</label>
                        <input type="email" id="formSubmitEmail" placeholder="your@email.com">
                        <small>Email address where all form submissions will be sent</small>
                    </div>

                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="maintenanceMode">
                        <label for="maintenanceMode">Enable Maintenance Mode</label>
                    </div>

                    <button type="submit" class="btn-admin-primary">
                        <span class="btn-icon">üíæ</span>
                        Save Settings
                    </button>
                </form>
            </div>
        </section>

    </main>

    <!-- Add Account Modal -->
    <div id="addAccountModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Payment Account</h3>
                <button class="modal-close" onclick="closeAddAccountModal()">&times;</button>
            </div>
            <form id="addAccountForm" class="admin-form">
                <div class="form-group">
                    <label for="accountName">Account Name / Bank Name</label>
                    <input type="text" id="accountName" placeholder="e.g., Chase Bank" required>
                </div>

                <div class="form-group">
                    <label for="accountType">Account Type</label>
                    <select id="accountType" required>
                        <option value="">Select account type</option>
                        <option value="Bank Account">Bank Account</option>
                        <option value="Credit Card">Credit Card</option>
                        <option value="PayPal">PayPal</option>
                        <option value="Crypto Wallet">Crypto Wallet</option>
                        <option value="Wire Transfer">Wire Transfer</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="accountNumber">Account Number / Details</label>
                    <input type="text" id="accountNumber" placeholder="e.g., 1234567890" required>
                </div>

                <div class="form-group">
                    <label for="routingNumber">Routing Number (if applicable)</label>
                    <input type="text" id="routingNumber" placeholder="e.g., 123456789">
                </div>

                <div class="form-group">
                    <label for="accountHolder">Account Holder Name</label>
                    <input type="text" id="accountHolder" placeholder="e.g., Quick Loan LLC" required>
                </div>

                <div class="form-group">
                    <label for="additionalInfo">Additional Instructions</label>
                    <textarea id="additionalInfo" rows="3" placeholder="Any additional payment instructions for clients..."></textarea>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="accountActive" checked>
                    <label for="accountActive">Set as Active Account</label>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeAddAccountModal()">Cancel</button>
                    <button type="submit" class="btn-admin-primary">
                        <span class="btn-icon">‚ûï</span>
                        Add Account
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Account Modal -->
    <div id="editAccountModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Payment Account</h3>
                <button class="modal-close" onclick="closeEditAccountModal()">&times;</button>
            </div>
            <form id="editAccountForm" class="admin-form">
                <input type="hidden" id="editAccountId">
                
                <div class="form-group">
                    <label for="editAccountName">Account Name / Bank Name</label>
                    <input type="text" id="editAccountName" required>
                </div>

                <div class="form-group">
                    <label for="editAccountType">Account Type</label>
                    <select id="editAccountType" required>
                        <option value="Bank Account">Bank Account</option>
                        <option value="Credit Card">Credit Card</option>
                        <option value="PayPal">PayPal</option>
                        <option value="Crypto Wallet">Crypto Wallet</option>
                        <option value="Wire Transfer">Wire Transfer</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="editAccountNumber">Account Number / Details</label>
                    <input type="text" id="editAccountNumber" required>
                </div>

                <div class="form-group">
                    <label for="editRoutingNumber">Routing Number</label>
                    <input type="text" id="editRoutingNumber">
                </div>

                <div class="form-group">
                    <label for="editAccountHolder">Account Holder Name</label>
                    <input type="text" id="editAccountHolder" required>
                </div>

                <div class="form-group">
                    <label for="editAdditionalInfo">Additional Instructions</label>
                    <textarea id="editAdditionalInfo" rows="3"></textarea>
                </div>

                <div class="form-group checkbox-group">
                    <input type="checkbox" id="editAccountActive">
                    <label for="editAccountActive">Active Account</label>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeEditAccountModal()">Cancel</button>
                    <button type="submit" class="btn-admin-primary">
                        <span class="btn-icon">üíæ</span>
                        Update Account
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast toast-success">
        <span class="toast-icon">‚úì</span>
        <span class="toast-message" id="toastMessage">Action completed successfully!</span>
    </div>

    <script src="admin-dashboard.js"></script>
</body>
</html>